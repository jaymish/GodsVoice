<!-- Store this code in 'login.html' file inside the 'templates' folder -->
<!DOCTYPE html>
<html lang="en">
	<head>
    <meta charset="utf-8">
    <!--  This file has been downloaded from bootdey.com @bootdey on twitter -->
    <!--  All snippets are MIT license http://bootdey.com/license -->
    <title>God's Voice</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <link href="{{ url_for('static', filename='css/new_1.css') }}" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.1/dist/js/bootstrap.bundle.min.js"></script>
	<link href="{{ url_for('static', filename='css/new.css') }}" rel="stylesheet" />
</head>
	<body>
	<nav class="navbar navbar-expand-lg fixed-top navbar-light" style="opacity: 0.7; background-color: #fff;">
  <div class="container-fluid" >
    <a class="navbar-brand" href="{{ url_for('home') }}">God's-Voice</a>
    <div class="justify-content-end" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
		<li class="nav-item">
          <a class="nav-link active" aria-current="page" href="{{ url_for('logout') }}">Logout</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
<nav class="navbar sticky-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="#" style="opacity: 0;">S</a>
  </div>
</nav>	
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
	<div class="container">
	<br/>
	<div class="row justify-content-center">
	
                        <div class="col-12 col-md-10 col-lg-8">
							<!--form method=post enctype=multipart/form-data-->
                            <form class="card card-sm" action = "{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data" onsubmit="return Validate(this);">
							<div class="card-body row no-gutters align-items-center">
								<div class="col">
									<h1 class="word">Hello {{session.username}}!!</h1>
								</div>
								{%if superadmin:%}
								<div class="col-auto">
                                    <button class="btn btn-lg btn-success" type="button" onclick="window.location.href='../users';" >Manage users</button>
                                </div>
								{%endif%}
							</div>
							
							<div class="card-body row no-gutters align-items-center">
								Welcome, You can upload new book here.
							</div>
							{%if msg:%}
							<div class="card-body row no-gutters align-items-center">
								{{msg}}
							</div>
							{%endif%}
							<div class="card-body row no-gutters align-items-center">
								<input type="file" name="file" class="form-control" accept=".pdf"/>
								
								<!--button class="btn btn-lg btn-success" type="submit">Upload</button-->
							</div>
							<div class="card-body row no-gutters align-items-center">
                                    
                                    <!--end of col-->
                                    <div class="col">
                                        <input class="form-control form-control-lg form-control-borderless" id="Book" name="Book" type="text" placeholder="Enter Book Title">
                                    </div>
                                    <!--end of col-->
                                    
                                    <!--end of col-->
                                </div>
							<div class="card-body row no-gutters align-items-center">
                                    
                                    <!--end of col-->
                                    <div class="col">
                                        <input class="form-control form-control-lg form-control-borderless" id="Author" name="Author" type="text" placeholder="Enter Author/Authors">
                                    </div>
                                    <!--end of col-->
                                    
                                    <!--end of col-->
                                </div>
							<div class="card-body row no-gutters align-items-center">
								<input class="btn btn-lg btn-success" type="submit" value="Upload">
							</div>
							</form>
                        </div>
                        <!--end of col-->
    </div>
	</div>
	<script>
        
var _validFileExtensions = [".pdf"];    
function Validate(oForm) {
    var arrInputs = oForm.getElementsByTagName("input");
    for (var i = 0; i < arrInputs.length; i++) {
        var oInput = arrInputs[i];
        if (oInput.type == "file") {
            var sFileName = oInput.value;
            if (sFileName.length > 0) {
                var blnValid = false;
                for (var j = 0; j < _validFileExtensions.length; j++) {
                    var sCurExtension = _validFileExtensions[j];
                    if (sFileName.substr(sFileName.length - sCurExtension.length, sCurExtension.length).toLowerCase() == sCurExtension.toLowerCase()) {
                        blnValid = true;
                        break;
                    }
                }
                
                if (!blnValid) {
                    alert("Sorry, " + sFileName + " is invalid, allowed extensions are: " + _validFileExtensions.join(", "));
                    return false;
                }
            }
        }
    }
  
    return true;
}
    </script>
	</body>
</html>

